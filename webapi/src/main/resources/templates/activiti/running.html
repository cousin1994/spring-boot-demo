<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
      layout:decorator="layout">
<head>
    <title>运行中的流程</title>
</head>
<body>
<h1 layout:fragment="header">运行中流程列表</h1>
<div layout:fragment="content">
    <table class="table table-bordered table-hover table-striped">
        <thead>
        <tr>
            <td width="15%">ID</td>
            <td width="5%">KEY</td>
            <td width="5%">部署id</td>
            <td width="15%">NAME</td>
            <td width="50%">图片</td>
            <td width="10%">OPTS</td>
        </tr>
        </thead>
        <tbody>
        <tr th:if="${map.empty}">
            <td colspan="5">No messages</td>
        </tr>
        <tr th:each="map: ${map}">
            <td th:text="${map['pi'].id}"></td>
            <td th:text="${map['pi'].deploymentId}"></td>
            <td th:text="${map['pi'].businessKey}"></td>
            <td th:text="${map['task'].name}"></td>
            <td><a class="trace"
                   href="#" th:pid="${map['pi'].id}" th:pdid="${map['pi'].processDefinitionId}"
                   th:text="${map['task'].name}">
                <!--<span th:text="${nameList[iterationStatus.index]}"></span>-->
            </a>
            </td>
            <td>
                <a th:href="@{'/activiti/process/start/' + ${map['pi'].id}}">启动</a>
                <a th:href="@{'/activiti/processes/delete/' + ${map['pi'].deploymentId}}">删除</a>
            </td>
        </tr>
        </tbody>
    </table>

</div>
<th:block layout:fragment="script">
    <script src="/myjs/workflow.js"></script>
    <!--<script src="/jui/jquery-ui-1.9.2.min.js"></script>-->
    <script src="/myjs/jquery.qtip.pack.js"></script>
    <script src="/myjs/jquery.qtip.pack.js" type="text/javascript"></script>
    <script>
        $(function () {
            // 跟踪
            $('.trace').click(graphTrace);
        });
    </script>
</th:block>
</body>
</html>
